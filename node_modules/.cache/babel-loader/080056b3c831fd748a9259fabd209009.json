{"ast":null,"code":"function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\n\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nimport { defaults, makePromise } from './utils.js';\nimport request from './request.js';\n\nvar getDefaults = function getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    parse: function parse(data) {\n      return JSON.parse(data);\n    },\n    stringify: JSON.stringify,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    parseLoadPayload: function parseLoadPayload(languages, namespaces) {\n      return undefined;\n    },\n    request: request,\n    reloadInterval: typeof window !== 'undefined' ? false : 60 * 60 * 1000,\n    customHeaders: {},\n    queryStringParams: {},\n    crossDomain: false,\n    withCredentials: false,\n    overrideMimeType: false,\n    requestOptions: {\n      mode: 'cors',\n      credentials: 'same-origin',\n      cache: 'default'\n    }\n  };\n};\n\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, Backend);\n\n    this.services = services;\n    this.options = options;\n    this.allOptions = allOptions;\n    this.type = 'backend';\n    this.init(services, options, allOptions);\n  }\n\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.allOptions = allOptions;\n\n      if (this.services && this.options.reloadInterval) {\n        setInterval(function () {\n          return _this.reload();\n        }, this.options.reloadInterval);\n      }\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      this._readAny(languages, languages, namespaces, namespaces, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      this._readAny([language], language, [namespace], namespace, callback);\n    }\n  }, {\n    key: \"_readAny\",\n    value: function _readAny(languages, loadUrlLanguages, namespaces, loadUrlNamespaces, callback) {\n      var _this2 = this;\n\n      var loadPath = this.options.loadPath;\n\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n\n      loadPath = makePromise(loadPath);\n      loadPath.then(function (resolvedLoadPath) {\n        if (!resolvedLoadPath) return callback(null, {});\n\n        var url = _this2.services.interpolator.interpolate(resolvedLoadPath, {\n          lng: languages.join('+'),\n          ns: namespaces.join('+')\n        });\n\n        _this2.loadUrl(url, callback, loadUrlLanguages, loadUrlNamespaces);\n      });\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback, languages, namespaces) {\n      var _this3 = this;\n\n      var lng = typeof languages === 'string' ? [languages] : languages;\n      var ns = typeof namespaces === 'string' ? [namespaces] : namespaces;\n      var payload = this.options.parseLoadPayload(lng, ns);\n      this.options.request(this.options, url, payload, function (err, res) {\n        if (res && (res.status >= 500 && res.status < 600 || !res.status)) return callback('failed loading ' + url + '; status code: ' + res.status, true);\n        if (res && res.status >= 400 && res.status < 500) return callback('failed loading ' + url + '; status code: ' + res.status, false);\n        if (!res && err && err.message && err.message.indexOf('Failed to fetch') > -1) return callback('failed loading ' + url + ': ' + err.message, true);\n        if (err) return callback(err, false);\n        var ret, parseErr;\n\n        try {\n          if (typeof res.data === 'string') {\n            ret = _this3.options.parse(res.data, languages, namespaces);\n          } else {\n            ret = res.data;\n          }\n        } catch (e) {\n          parseErr = 'failed parsing ' + url + ' to json';\n        }\n\n        if (parseErr) return callback(parseErr, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue, callback) {\n      var _this4 = this;\n\n      if (!this.options.addPath) return;\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      var finished = 0;\n      var dataArray = [];\n      var resArray = [];\n      languages.forEach(function (lng) {\n        var addPath = _this4.options.addPath;\n\n        if (typeof _this4.options.addPath === 'function') {\n          addPath = _this4.options.addPath(lng, namespace);\n        }\n\n        var url = _this4.services.interpolator.interpolate(addPath, {\n          lng: lng,\n          ns: namespace\n        });\n\n        _this4.options.request(_this4.options, url, payload, function (data, res) {\n          finished += 1;\n          dataArray.push(data);\n          resArray.push(res);\n\n          if (finished === languages.length) {\n            if (typeof callback === 'function') callback(dataArray, resArray);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this5 = this;\n\n      var _this$services = this.services,\n          backendConnector = _this$services.backendConnector,\n          languageUtils = _this$services.languageUtils,\n          logger = _this$services.logger;\n      var currentLanguage = backendConnector.language;\n      if (currentLanguage && currentLanguage.toLowerCase() === 'cimode') return;\n      var toLoad = [];\n\n      var append = function append(lng) {\n        var lngs = languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n\n      append(currentLanguage);\n      if (this.allOptions.preload) this.allOptions.preload.forEach(function (l) {\n        return append(l);\n      });\n      toLoad.forEach(function (lng) {\n        _this5.allOptions.ns.forEach(function (ns) {\n          backendConnector.read(lng, ns, 'read', null, null, function (err, data) {\n            if (err) logger.warn(\"loading namespace \".concat(ns, \" for language \").concat(lng, \" failed\"), err);\n            if (!err && data) logger.log(\"loaded namespace \".concat(ns, \" for language \").concat(lng), data);\n            backendConnector.loaded(\"\".concat(lng, \"|\").concat(ns), err, data);\n          });\n        });\n      });\n    }\n  }]);\n\n  return Backend;\n}();\n\nBackend.type = 'backend';\nexport default Backend;","map":{"version":3,"sources":["C:/Users/HP14EC0101NW/OneDrive/Рабочий стол/clone/Portfolio/node_modules/i18next-http-backend/esm/index.js"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","_defineProperty","obj","value","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","defaults","makePromise","request","getDefaults","loadPath","addPath","parse","data","JSON","stringify","parsePayload","namespace","fallbackValue","parseLoadPayload","languages","namespaces","reloadInterval","window","customHeaders","queryStringParams","crossDomain","withCredentials","overrideMimeType","requestOptions","mode","credentials","cache","Backend","services","options","arguments","allOptions","type","init","_this","setInterval","reload","readMulti","callback","_readAny","read","language","loadUrlLanguages","loadUrlNamespaces","_this2","then","resolvedLoadPath","url","interpolator","interpolate","lng","join","ns","loadUrl","_this3","payload","err","status","message","indexOf","ret","parseErr","e","create","_this4","finished","dataArray","resArray","forEach","push","_this5","_this$services","backendConnector","languageUtils","logger","currentLanguage","toLowerCase","toLoad","append","lngs","toResolveHierarchy","l","preload","warn","concat","log","loaded"],"mappings":"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","sourcesContent":["function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { defaults, makePromise } from './utils.js';\nimport request from './request.js';\nvar getDefaults = function getDefaults() {\n  return {\n    loadPath: '/locales/{{lng}}/{{ns}}.json',\n    addPath: '/locales/add/{{lng}}/{{ns}}',\n    parse: function parse(data) {\n      return JSON.parse(data);\n    },\n    stringify: JSON.stringify,\n    parsePayload: function parsePayload(namespace, key, fallbackValue) {\n      return _defineProperty({}, key, fallbackValue || '');\n    },\n    parseLoadPayload: function parseLoadPayload(languages, namespaces) {\n      return undefined;\n    },\n    request: request,\n    reloadInterval: typeof window !== 'undefined' ? false : 60 * 60 * 1000,\n    customHeaders: {},\n    queryStringParams: {},\n    crossDomain: false,\n    withCredentials: false,\n    overrideMimeType: false,\n    requestOptions: {\n      mode: 'cors',\n      credentials: 'same-origin',\n      cache: 'default'\n    }\n  };\n};\nvar Backend = function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Backend);\n    this.services = services;\n    this.options = options;\n    this.allOptions = allOptions;\n    this.type = 'backend';\n    this.init(services, options, allOptions);\n  }\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var allOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.allOptions = allOptions;\n      if (this.services && this.options.reloadInterval) {\n        setInterval(function () {\n          return _this.reload();\n        }, this.options.reloadInterval);\n      }\n    }\n  }, {\n    key: \"readMulti\",\n    value: function readMulti(languages, namespaces, callback) {\n      this._readAny(languages, languages, namespaces, namespaces, callback);\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      this._readAny([language], language, [namespace], namespace, callback);\n    }\n  }, {\n    key: \"_readAny\",\n    value: function _readAny(languages, loadUrlLanguages, namespaces, loadUrlNamespaces, callback) {\n      var _this2 = this;\n      var loadPath = this.options.loadPath;\n      if (typeof this.options.loadPath === 'function') {\n        loadPath = this.options.loadPath(languages, namespaces);\n      }\n      loadPath = makePromise(loadPath);\n      loadPath.then(function (resolvedLoadPath) {\n        if (!resolvedLoadPath) return callback(null, {});\n        var url = _this2.services.interpolator.interpolate(resolvedLoadPath, {\n          lng: languages.join('+'),\n          ns: namespaces.join('+')\n        });\n        _this2.loadUrl(url, callback, loadUrlLanguages, loadUrlNamespaces);\n      });\n    }\n  }, {\n    key: \"loadUrl\",\n    value: function loadUrl(url, callback, languages, namespaces) {\n      var _this3 = this;\n      var lng = typeof languages === 'string' ? [languages] : languages;\n      var ns = typeof namespaces === 'string' ? [namespaces] : namespaces;\n      var payload = this.options.parseLoadPayload(lng, ns);\n      this.options.request(this.options, url, payload, function (err, res) {\n        if (res && (res.status >= 500 && res.status < 600 || !res.status)) return callback('failed loading ' + url + '; status code: ' + res.status, true);\n        if (res && res.status >= 400 && res.status < 500) return callback('failed loading ' + url + '; status code: ' + res.status, false);\n        if (!res && err && err.message && err.message.indexOf('Failed to fetch') > -1) return callback('failed loading ' + url + ': ' + err.message, true);\n        if (err) return callback(err, false);\n        var ret, parseErr;\n        try {\n          if (typeof res.data === 'string') {\n            ret = _this3.options.parse(res.data, languages, namespaces);\n          } else {\n            ret = res.data;\n          }\n        } catch (e) {\n          parseErr = 'failed parsing ' + url + ' to json';\n        }\n        if (parseErr) return callback(parseErr, false);\n        callback(null, ret);\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue, callback) {\n      var _this4 = this;\n      if (!this.options.addPath) return;\n      if (typeof languages === 'string') languages = [languages];\n      var payload = this.options.parsePayload(namespace, key, fallbackValue);\n      var finished = 0;\n      var dataArray = [];\n      var resArray = [];\n      languages.forEach(function (lng) {\n        var addPath = _this4.options.addPath;\n        if (typeof _this4.options.addPath === 'function') {\n          addPath = _this4.options.addPath(lng, namespace);\n        }\n        var url = _this4.services.interpolator.interpolate(addPath, {\n          lng: lng,\n          ns: namespace\n        });\n        _this4.options.request(_this4.options, url, payload, function (data, res) {\n          finished += 1;\n          dataArray.push(data);\n          resArray.push(res);\n          if (finished === languages.length) {\n            if (typeof callback === 'function') callback(dataArray, resArray);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"reload\",\n    value: function reload() {\n      var _this5 = this;\n      var _this$services = this.services,\n        backendConnector = _this$services.backendConnector,\n        languageUtils = _this$services.languageUtils,\n        logger = _this$services.logger;\n      var currentLanguage = backendConnector.language;\n      if (currentLanguage && currentLanguage.toLowerCase() === 'cimode') return;\n      var toLoad = [];\n      var append = function append(lng) {\n        var lngs = languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(function (l) {\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      append(currentLanguage);\n      if (this.allOptions.preload) this.allOptions.preload.forEach(function (l) {\n        return append(l);\n      });\n      toLoad.forEach(function (lng) {\n        _this5.allOptions.ns.forEach(function (ns) {\n          backendConnector.read(lng, ns, 'read', null, null, function (err, data) {\n            if (err) logger.warn(\"loading namespace \".concat(ns, \" for language \").concat(lng, \" failed\"), err);\n            if (!err && data) logger.log(\"loaded namespace \".concat(ns, \" for language \").concat(lng), data);\n            backendConnector.loaded(\"\".concat(lng, \"|\").concat(ns), err, data);\n          });\n        });\n      });\n    }\n  }]);\n  return Backend;\n}();\nBackend.type = 'backend';\nexport default Backend;"]},"metadata":{},"sourceType":"module"}